<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>指定年月のイベント削除リスト</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

    <div class="container mt-5">
        <div class="card shadow">
            <div class="card-header bg-success text-white text-center">
                <h3 class="mb-0">{{ selected_year }}年{{ selected_month }}月 のイベント削除リスト</h3>
            </div>
            <div class="card-body">
                {% if events_to_delete_specificed_term %}
                    <p class="text-success">以下のイベントが削除対象になります。</p>
                    <ul class="list-group">
                        {% for event in events_to_delete_specificed_term %}
                        <li class="list-group-item">
                            <strong>{{ event.summary }}</strong><br>
                            {{ event.start.dateTime or event.start.date }} ～ {{ event.end.dateTime or event.end.date }}
                        </li>
                        {% endfor %}
                    </ul>
                                    <div class="text-center mt-4">
                                      <form action="{{ url_for('delete_events_specificed_term') }}" method="POST">
                                        <button type="submit" class="btn btn-success" id="registerBtn">
                                          Googleカレンダーから削除
                                        </button>
                                      </form>
                                    </div>                          
                                       <!-- ローディング表示部分 -->
                                    <div id="loadingArea" class="mt-3 text-center" style="display: none;">
                                      <div class="progress" style="height: 25px;">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" 
                                            role="progressbar" style="width: 100%">
                                          登録処理中です。しばらくお待ちください...
                                        </div>
                                      </div>
                                    </div>

                                    <script>
                                      document.getElementById("registerBtn").addEventListener("click", function() {
                                        // ローディング表示を出す
                                        document.getElementById("loadingArea").style.display = "block";
                                        // ボタンを無効化
                                        this.classList.add("disabled");
                                        this.innerText = "処理中...";
                                      });
                                    </script>

                {% else %}
                    <p class="text-dark">削除対象のイベントは見つかりませんでした。</p>
                {% endif %}
            </div>


            <div class="card-footer text-center">
                <a href="{{ url_for('upload_file') }}" class="btn btn-primary" method="get">アップロード画面に戻る</a>
            </div>

        </div>
    </div>

</body>
</html>
